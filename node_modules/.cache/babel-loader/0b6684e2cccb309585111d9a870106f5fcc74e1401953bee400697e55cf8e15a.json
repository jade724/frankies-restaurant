{"ast":null,"code":"// Account.js (new file)\nimport React,{useState,useEffect}from'react';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Account=()=>{const[formData,setFormData]=useState({name:'',email:'',password:'',confirmPassword:''});const[message,setMessage]=useState('');const[successMessage,setSuccessMessage]=useState('');useEffect(()=>{const fetchUserData=async()=>{try{const token=localStorage.getItem('token');if(!token){setMessage('You must be logged in to access this page.');return;}const response=await fetch('/api/account',{headers:{Authorization:`Bearer ${token}`}});if(!response.ok){const errorData=await response.json();throw new Error(errorData.error||'Failed to fetch account details.');}const data=await response.json();setFormData({name:data.name,email:data.email});}catch(error){console.error('Error fetching user data:',error);setMessage(error.message);}};fetchUserData();},[]);const handleChange=e=>{setFormData({...formData,[e.target.name]:e.target.value});};const handleUpdate=async e=>{e.preventDefault();setMessage('');setSuccessMessage('');try{const token=localStorage.getItem('token');if(!token)throw new Error('You must be logged in to update your account.');const response=await fetch('/api/account',{method:'PUT',headers:{'Content-Type':'application/json',Authorization:`Bearer ${token}`},body:JSON.stringify(formData)});if(!response.ok){const errorData=await response.json();throw new Error(errorData.error||'Failed to update account.');}setSuccessMessage('Account updated successfully!');}catch(error){console.error('Update error:',error);setMessage(error.message);}};const handleDelete=async()=>{try{const token=localStorage.getItem('token');if(!token)throw new Error('You must be logged in to delete your account.');const confirmed=window.confirm('Are you sure you want to delete your account? This action cannot be undone.');if(!confirmed)return;const response=await fetch('/api/account',{method:'DELETE',headers:{Authorization:`Bearer ${token}`}});if(!response.ok){const errorData=await response.json();throw new Error(errorData.error||'Failed to delete account.');}localStorage.removeItem('token');localStorage.removeItem('userEmail');// Redirect to home page or login page after deletion\nwindow.location.href='/';}catch(error){console.error('Delete error:',error);setMessage(error.message);}};return/*#__PURE__*/_jsxs(\"div\",{className:\"account-page\",children:[/*#__PURE__*/_jsx(\"section\",{className:\"hero-section d-flex justify-content-center align-items-center\",children:/*#__PURE__*/_jsx(\"div\",{className:\"container\",children:/*#__PURE__*/_jsx(\"h1\",{className:\"display-4 text-white\",children:\"My Account\"})})}),/*#__PURE__*/_jsx(\"div\",{className:\"account-details-section py-5\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[message&&/*#__PURE__*/_jsx(\"div\",{className:\"alert alert-danger\",children:message}),successMessage&&/*#__PURE__*/_jsx(\"div\",{className:\"alert alert-success\",children:successMessage}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleUpdate,children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Update Account Details\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"name\",className:\"form-label\",children:\"Name\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",id:\"name\",name:\"name\",value:formData.name,onChange:handleChange})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"email\",className:\"form-label\",children:\"Email address\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",className:\"form-control\",id:\"email\",name:\"email\",value:formData.email,onChange:handleChange})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"password\",className:\"form-label\",children:\"New Password\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",className:\"form-control\",id:\"password\",name:\"password\",value:formData.password,onChange:handleChange})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"confirmPassword\",className:\"form-label\",children:\"Confirm New Password\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",className:\"form-control\",id:\"confirmPassword\",name:\"confirmPassword\",value:formData.confirmPassword,onChange:handleChange})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn btn-primary\",children:\"Update Account\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"delete-account-section mt-4\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Delete Account\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Please note that deleting your account is a permanent action and cannot be undone.\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-danger\",onClick:handleDelete,children:\"Delete Account\"})]})]})})]});};export default Account;","map":{"version":3,"names":["React","useState","useEffect","jsx","_jsx","jsxs","_jsxs","Account","formData","setFormData","name","email","password","confirmPassword","message","setMessage","successMessage","setSuccessMessage","fetchUserData","token","localStorage","getItem","response","fetch","headers","Authorization","ok","errorData","json","Error","error","data","console","handleChange","e","target","value","handleUpdate","preventDefault","method","body","JSON","stringify","handleDelete","confirmed","window","confirm","removeItem","location","href","className","children","onSubmit","htmlFor","type","id","onChange","onClick"],"sources":["/Users/jjom/Documents/frankies_restaurant/src/components/Account.js"],"sourcesContent":["// Account.js (new file)\nimport React, { useState, useEffect } from 'react';\n\nconst Account = () => {\n  const [formData, setFormData] = useState({\n    name: '',\n    email: '',\n    password: '',\n    confirmPassword: '',\n  });\n\n  const [message, setMessage] = useState('');\n  const [successMessage, setSuccessMessage] = useState('');\n\n  useEffect(() => {\n    const fetchUserData = async () => {\n      try {\n        const token = localStorage.getItem('token');\n        if (!token) {\n          setMessage('You must be logged in to access this page.');\n          return;\n        }\n\n        const response = await fetch('/api/account', {\n          headers: {\n            Authorization: `Bearer ${token}`,\n          },\n        });\n\n        if (!response.ok) {\n          const errorData = await response.json();\n          throw new Error(errorData.error || 'Failed to fetch account details.');\n        }\n\n        const data = await response.json();\n        setFormData({ name: data.name, email: data.email });\n      } catch (error) {\n        console.error('Error fetching user data:', error);\n        setMessage(error.message);\n      }\n    };\n\n    fetchUserData();\n  }, []);\n\n  const handleChange = (e) => {\n    setFormData({\n      ...formData,\n      [e.target.name]: e.target.value,\n    });\n  };\n\n  const handleUpdate = async (e) => {\n    e.preventDefault();\n    setMessage('');\n    setSuccessMessage('');\n\n    try {\n      const token = localStorage.getItem('token');\n      if (!token) throw new Error('You must be logged in to update your account.');\n\n      const response = await fetch('/api/account', {\n        method: 'PUT',\n        headers: {\n          'Content-Type': 'application/json',\n          Authorization: `Bearer ${token}`,\n        },\n        body: JSON.stringify(formData),\n      });\n\n      if (!response.ok) {\n        const errorData = await response.json();\n        throw new Error(errorData.error || 'Failed to update account.');\n      }\n\n      setSuccessMessage('Account updated successfully!');\n    } catch (error) {\n      console.error('Update error:', error);\n      setMessage(error.message);\n    }\n  };\n\n  const handleDelete = async () => {\n    try {\n      const token = localStorage.getItem('token');\n      if (!token) throw new Error('You must be logged in to delete your account.');\n\n      const confirmed = window.confirm('Are you sure you want to delete your account? This action cannot be undone.');\n      if (!confirmed) return;\n\n      const response = await fetch('/api/account', {\n        method: 'DELETE',\n        headers: {\n          Authorization: `Bearer ${token}`,\n        },\n      });\n\n      if (!response.ok) {\n        const errorData = await response.json();\n        throw new Error(errorData.error || 'Failed to delete account.');\n      }\n\n      localStorage.removeItem('token');\n      localStorage.removeItem('userEmail');\n      // Redirect to home page or login page after deletion\n      window.location.href = '/'; \n    } catch (error) {\n      console.error('Delete error:', error);\n      setMessage(error.message);\n    }\n  };\n\n  return (\n    <div className=\"account-page\">\n      <section className=\"hero-section d-flex justify-content-center align-items-center\">\n        <div className=\"container\">\n          <h1 className=\"display-4 text-white\">My Account</h1>\n        </div>\n      </section>\n\n      <div className=\"account-details-section py-5\">\n        <div className=\"container\">\n          {message && <div className=\"alert alert-danger\">{message}</div>}\n          {successMessage && <div className=\"alert alert-success\">{successMessage}</div>}\n\n          <form onSubmit={handleUpdate}>\n            <h2>Update Account Details</h2>\n            <div className=\"mb-3\">\n              <label htmlFor=\"name\" className=\"form-label\">Name</label>\n              <input\n                type=\"text\"\n                className=\"form-control\"\n                id=\"name\"\n                name=\"name\"\n                value={formData.name}\n                onChange={handleChange}\n              />\n            </div>\n            <div className=\"mb-3\">\n              <label htmlFor=\"email\" className=\"form-label\">Email address</label>\n              <input\n                type=\"email\"\n                className=\"form-control\"\n                id=\"email\"\n                name=\"email\"\n                value={formData.email}\n                onChange={handleChange}\n              />\n            </div>\n            <div className=\"mb-3\">\n              <label htmlFor=\"password\" className=\"form-label\">New Password</label>\n              <input\n                type=\"password\"\n                className=\"form-control\"\n                id=\"password\"\n                name=\"password\"\n                value={formData.password}\n                onChange={handleChange}\n              />\n            </div>\n            <div className=\"mb-3\">\n              <label htmlFor=\"confirmPassword\" className=\"form-label\">Confirm New Password</label>\n              <input\n                type=\"password\"\n                className=\"form-control\"\n                id=\"confirmPassword\"\n                name=\"confirmPassword\"\n                value={formData.confirmPassword}\n                onChange={handleChange}\n              />\n            </div>\n            <button type=\"submit\" className=\"btn btn-primary\">Update Account</button>\n          </form>\n\n          <div className=\"delete-account-section mt-4\">\n            <h2>Delete Account</h2>\n            <p>Please note that deleting your account is a permanent action and cannot be undone.</p>\n            <button className=\"btn btn-danger\" onClick={handleDelete}>Delete Account</button>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default Account;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}